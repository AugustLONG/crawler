{% extends 'base.html' %}
{% load i18n %}
{% block title %}用户注册{% endblock %}

{% block container %}
    <div class="container">
        <div class="row">
            <div class="col-lg-12" style="padding:108px 0px">
                <form action="" method="post">
                    {% csrf_token %}
                    <fieldset>
                        <legend>注册</legend>
                        {{ form.non_field_errors }}
                        {% for field in form %}
                            {{ field.errors }}
                            {% comment %} Displaying checkboxes differently {% endcomment %}
                            {% if field.name == 'tos' %}
                                <p class="checkbox">
                                    <label for="id_{{ field.name }}">{{ field }} {{ field.label }}</label>
                                </p>
                            {% else %}
                                <p>
                                    {{ field.label_tag }}
                                    {{ field }}
                                </p>
                            {% endif %}
                        {% endfor %}
                    </fieldset>
                    <input type="submit" class="btn btn-default" value="注册"/>
                    <button class='js-captcha-refresh btn btn-default' >更新</button>
                </form>
            </div>
        </div>
    </div>

{% endblock %}
{% block script %}
<script>
    $(function(){
        $('.js-captcha-refresh').click(function () {
            $form = $(this).parents('form');
            $.getJSON($(this).data('url'), {}, function (json) {
                // This should update your captcha image src and captcha hidden input
            });
            return false;
        });
    });
</script>
{% endblock %}